// ==========================================================================
// Chat
// ==========================================================================
//
// Table of Contents:
//
//  1. Settings Variables - (Component Settings Default)
//  2. Settings base - (Important settings and overwite default settings )
//  3. Content

//== 1. Settings Variables
$chat-text-color:                     #666 !default;
$chat-bg-color:                       #fff !default;
$chat-min-width:                      320px !default;
$chat-max-width:                      100% !default;
$chat-max-width-mq:                   530px !default;
$chat-position-right:                 0 !default;
$chat-position-right-mq:              20px !default;
$chat-body-height:                    330px !default;
$chat-border:                         1px solid #DCDCDC !default;
$chat-box-shadow:                     0px 0px 12px -2px #9a9a9a !default;
$chat-animation-time:                 .800ms !default;
$chat-toolbar-height:                 35px !default;
$chat-toolbar-width:                  100% !default;
$chat-toolbar-font-color:             #ffffff !default;
$chat-toolbar-bg-color:               #005DA4 !default;
$chat-toolbar-title-width:            60% !default;
$chat-toolbar-actions-width:          100% - 60% !default;
$chat-toolbar-icon-transitions:       fill $chat-animation-time linear !default;
$chat-toolbar-icon-hover-color:       #ffffff !default;
$chat-message-bg-color:               #DDD !default;
$chat-message-form-bg-color:          #f2f2f2 !default;
$chat-message-form-border:            1px solid #dedede !default;
$chat-message-reading-checked-fill:   #005DA4 !default;

//== 2. Settings base
@import 'base';

//== 3. Content

.chat {
  background-color: $chat-bg-color;
  border-left: $chat-border;
  border-right: $chat-border;
  border-top: $chat-border;
  box-shadow: $chat-box-shadow;
  max-width: $chat-max-width;
  min-width: $chat-min-width;
  position: fixed;
  right: $chat-position-right;
  bottom: 0;
  width: 100%;
  height: 100%;
  z-index: 10;
  @include breakpoint("tablet-small") {
    height: auto;
    max-width: $chat-max-width-mq;
    right: $chat-position-right-mq;
  }

  &.set-action-open {
    display: block;
  }
  &.set-action-close {
    display: none;
  }

}

.chat-toolbar {
  width: $chat-toolbar-width;
  height: $chat-toolbar-height;
  background-color: $chat-toolbar-bg-color;
  color: $chat-toolbar-font-color;
}

.chat-toolbar-title,
.chat-toolbar-actions {
  box-sizing: border-box;
  height: $chat-toolbar-height;
}

.chat-toolbar-title {
  display: inline-block;
  vertical-align: middle;
  padding: 10px;
  font-size: 14px;
  width: $chat-toolbar-title-width;
  font-style: italic;
  text-align: left;
  @include truncate($chat-toolbar-title-width);
}

.chat-toolbar-actions {
  display: inline-block;
  text-align: right;
  vertical-align: middle;
  padding: 8px;
  width: $chat-toolbar-actions-width;
  .chat-toolbar-icon {
    cursor: pointer;
    margin-right: 10px;
    transition: $chat-toolbar-icon-transitions;
    &:hover {
      fill: $chat-toolbar-icon-hover-color;
    }
  }

  .chat-toolbar-btn-restore {
    display: none;
    @include breakpoint("tablet-small") {
      display: inline-block;
    }
  }
}

.chat-body {
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  color: $chat-text-color;
  transition: height $chat-animation-time linear;

  &.set-action-maximize { height: 100%; }
  &.set-action-minimize {
    height: 0;
    overflow: hidden;
  }

}

.chat-messages-list {
  box-sizing: border-box;
  width: 100%;
  padding: 0 10px 10px;
  margin-top: 10px;
  height: calc(100% - 145px);
  font-style: italic;
  font-size: 16px;
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  @include breakpoint("tablet-small") {
    height: $chat-body-height;
    font-size: 14px;
  }
}

.chat-message-item {
  overflow: hidden;
  margin: 10px 0;
  .chat-user-picture {
    float: left;
    width: 65px;
    height: 65px;
    img {
      max-width: 100%;
    }
  }
  .chat-message-content {
    box-sizing: border-box;
    width: 73%;
    min-height: 65px;
    float: left;
    padding: 7px;
    position: relative;
    margin: 0 0 0 15px;
    background-color: $chat-message-bg-color;
    &:before {
      content: "";
      border-style: solid;
      display: block;
      border-width: 7px;
      border-color: transparent $chat-message-bg-color transparent transparent;
      position: absolute;
      left: -14px;
      top: 5px;
    }
  }
  .chat-message-user-info {
    width: 155px;
    padding: 0 10px 0 0;
    font-size: 12px;
    line-height: 12px;
    position: absolute;
    bottom: 7px;
  }
  .chat-message-profile-name {
    display: block;
  }
  .chat-message-company-name {
    margin: 0;
  }
  .chat-message-time {
    white-space: nowrap;
    font-size: 11px;
    margin-top: 2px;
    display: block;
  }
  .chat-message-text {
    float: right;
    width: 100%;
    margin-bottom: 25px;
      @include breakpoint("tablet-small") {
      width: 65%;
      margin-bottom: 0;
    }
  }
  .chat-message-reading-status {
    display: block;
    margin-top: 19px;
    float: left;
    clear: both;
    .icon-reading-status {
      &.icon-reading-status-checked { fill: $chat-message-reading-checked-fill; }
    }
  }
  &.chat-message-type-sender {
    .chat-user-picture {
      float: right;
    }
    .chat-message-content {
      margin: 0 15px 0 0;
      float: right;
      &:before {
        border-color: transparent transparent transparent $chat-message-bg-color;
        right: -14px;
        left: initial;
      }
    }
    .chat-message-user-info {
      right: 5px;
      left: initial;
      text-align: right;
    }
    .chat-message-text {
      float: left;
    }
  }
}

.chat-message-form {
  box-sizing: border-box;
  width: 100%;
  height: 100px;
  border-top: $chat-message-form-border;
  padding: 10px;
  .chat-message-form-input {
    box-sizing: border-box;
    width: 100%;
    height: 100%;
    padding: 10px;
    font-size: 12px;
    color: $chat-text-color;
    resize: none;
    margin: 0;
    background-color: $chat-message-form-bg-color;
    border: $chat-message-form-border;
    box-shadow: inset 0px 0px 14px -2px #9a9a9a;
  }
}
